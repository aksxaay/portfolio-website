!function(){"use strict";var i={compile:function(r){return o.template.replace(o.pattern,function(t,e){var n=o.middleware(e,r[e],o.template);return void 0!==n?n:r[e]||t})},setOptions:function(t){o.pattern=t.pattern||o.pattern,o.template=t.template||o.template,"function"==typeof t.middleware&&(o.middleware=t.middleware)}},o={pattern:/\{(.*?)\}/g,template:"",middleware:function(){}},e=new function(){this.matches=function(t,e){return function(t,e){var n=e.length,r=t.length;if(n<r)return!1;if(r===n)return t===e;t:for(var i=0,o=0;i<r;i++){for(var u=t.charCodeAt(i);o<n;)if(e.charCodeAt(o++)===u)continue t;return!1}return!0}(e.toLowerCase(),t.toLowerCase())}},n=new function(){this.matches=function(e,t){return!!e&&(e=e.trim().toLowerCase(),(t=t.trim().toLowerCase()).split(" ").filter(function(t){return 0<=e.indexOf(t)}).length===t.split(" ").length)}},r={put:function(t){return l(t)?f(t):(e=t,Boolean(e)&&"[object Array]"===Object.prototype.toString.call(e)?function(t){var e=[];c();for(var n=0,r=t.length;n<r;n++)l(t[n])&&e.push(f(t[n]));return e}(t):void 0);var e},clear:c,search:function(t){return t?function(t,e,n,r){for(var i=[],o=0;o<t.length&&i.length<r.limit;o++){var u=function(t,e,n,u){for(var r in t)if(!function(t,e){for(var n=!1,r=0,i=(e=(e=u.exclude)||[]).length;r<i;r++){var o=e[r];!n&&new RegExp(t).test(o)&&(n=!0)}return n}(t[r],0)&&n.matches(t[r],e))return t}(t[o],e,n,r);u&&i.push(u)}return i}(a,t,s.searchStrategy,s).sort(s.sort):[]},setOptions:function(t){(s=t||{}).fuzzy=t.fuzzy||!1,s.limit=t.limit||10,s.searchStrategy=t.fuzzy?e:n,s.sort=t.sort||u}};function u(){return 0}var a=[],s={};function c(){return a.length=0,a}function l(t){return Boolean(t)&&"[object Object]"===Object.prototype.toString.call(t)}function f(t){return a.push(t),a}s.fuzzy=!1,s.limit=10,s.searchStrategy=s.fuzzy?e:n,s.sort=u;var t,p,d,h,m=function(t,e){var n,r,i=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");i.open("GET",t,!0),i.onreadystatechange=(n=i,r=e,function(){if(4===n.readyState&&200===n.status)try{r(null,JSON.parse(n.responseText))}catch(t){r(t,null)}}),i.send()},v=function(t,e){var n,r={};for(n in t)r[n]=t[n],void 0!==e[n]&&(r[n]=e[n]);return r},w=function(t){try{return!!(t instanceof Object&&JSON.parse(JSON.stringify(t)))}catch(t){return!1}};function y(t){r.put(t),p.searchInput.addEventListener("input",function(t){-1===[13,16,20,37,38,39,40,91].indexOf(t.which)&&(g(),z(t.target.value))})}function g(){p.resultsContainer.innerHTML=""}function O(t){p.resultsContainer.innerHTML+=t}function z(t){t&&0<t.length&&(g(),function(t,e){var n=t.length;if(0===n)return O(p.noResultsText);for(var r=0;r<n;r++)t[r].query=e,O(i.compile(t[r]))}(r.search(t),t))}function S(t){throw new Error("SimpleJekyllSearch --- "+t)}t=window,p={searchInput:null,resultsContainer:null,json:[],success:Function.prototype,searchResultTemplate:'<li><a href="{url}" title="{desc}">{title}</a></li>',templateMiddleware:Function.prototype,sortMiddleware:function(){return 0},noResultsText:"No results found",limit:10,fuzzy:!1,exclude:[]},h=function t(e){if(!(e&&void 0!==e.required&&e.required instanceof Array))throw new Error("-- OptionsValidator: required options missing");if(!(this instanceof t))return new t(e);var r=e.required;this.getRequiredOptions=function(){return r},this.validate=function(e){var n=[];return r.forEach(function(t){void 0===e[t]&&n.push(t)}),n}}({required:d=["searchInput","resultsContainer","json"]}),t.SimpleJekyllSearch=function(t){var n;0<h.validate(t).length&&S("You must specify the following required options: "+d),p=v(p,t),i.setOptions({template:p.searchResultTemplate,middleware:p.templateMiddleware}),r.setOptions({fuzzy:p.fuzzy,limit:p.limit,sort:p.sortMiddleware}),w(p.json)?y(p.json):(n=p.json,m(n,function(t,e){t&&S("failed to get JSON ("+n+")"),y(e)}));t={search:z};return"function"==typeof p.success&&p.success.call(t),t}}();